/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package org.clas.fthodo;

/**
 *
 * @author pikkaros
 */
public class FTHodoWire {
    private int[][][] Mezz = {
            //Layer 1
            {{3, 3, 3, 4, 1, 2, 4, 6, 6, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1}, //sec1
            {1, 2, 13, 15, 2, 4, 12, 13, 3, 5, 11, 12, 6, 6, 5, 5, 10, 10, 10, 10}, //sec2
            {13, 13, 13, 12, 11, 12, 14, 9, 9, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1}, //sec3
            {15, 14, 15, 13, 14, 13, 14, 12, 10, 10, 14, 11, 9, 8, 8, 8, 8, 8, 8, 10}, //sec4
            {11, 2, 11, 13, 12, 12, 12, 11, 10, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1}, //sec5
            {1, 9, 7, 14, 14, 9, 7, 2, 1, 9, 5, 15, 9, 9, 11, 11, 5, 5, 7, 7}, //sec6
            {4, 3, 4, 3, 4, 14, 3, 5, 6, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1}, //sec7
            {3, 1, 1, 1, 4, 2, 2, 1, 4, 2, 6, 5, 6, 7, 7, 7, 7, 8, 8, 6}}, //sec8
            //Layer 2
            {{3, 3, 3, 4, 1, 2, 4, 6, 6, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1}, //sec1
            {1, 2, 13, 15, 2, 4, 12, 14, 3, 5, 11, 12, 6, 6, 5, 5, 10, 10, 10, 10}, //sec2
            {13, 13, 13, 12, 11, 12, 14, 9, 9, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1}, //sec3
            {15, 14, 15, 13, 14, 13, 14, 12, 10, 10, 14, 11, 9, 8, 8, 8, 8, 8, 8, 10}, //sec4
            {11, 2, 11, 13, 12, 12, 12, 11, 10, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1}, //sec5
            {1, 9, 7, 14, 13, 9, 7, 2, 1, 9, 5, 15, 9, 9, 11, 11, 5, 5, 7, 7}, //sec6
            {4, 3, 4, 3, 4, 14, 3, 5, 6, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1}, //sec7
            {3, 1, 1, 1, 4, 2, 2, 1, 4, 2, 6, 5, 6, 7, 7, 7, 7, 8, 8, 6}} //sec8
        };
    
         private int[][][] chanM = {
            //Layer 1
            {{7, 4, 6, 4, 1, 5, 6, 2, 4, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1}, //sec1
            {0, 6, 0, 1, 7, 7, 0, 1, 5, 7, 0, 1, 7, 6, 5, 6, 3, 4, 7, 6},//sec2
            {4, 2, 3, 3, 1, 2, 6, 5, 7, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1},//sec3
            {3, 2, 4, 5, 5, 6, 4, 4, 2, 5, 7, 2, 6, 3, 2, 4, 5, 7, 6, 1},//sec4
            {6, 0, 7, 7, 6, 5, 7, 5, 0, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1},//sec5
            {6, 3, 7, 1, 0, 4, 2, 1, 7, 2, 0, 6, 0, 1, 4, 3, 1, 2, 4, 3},//sec6
            {2, 2, 1, 0, 0, 3, 1, 3, 1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1},//sec7
            {3, 4, 5, 3, 3, 3, 2, 2, 5, 4, 5, 4, 0, 5, 6, 0, 1, 1, 0, 3}},//sec8
            //Layer 2
            {{13, 12, 14, 9, 15, 12, 11, 10, 8, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1},//sec1
            {14, 15, 8, 9, 14, 8, 9, 14, 15, 10, 8, 8, 11, 12, 8, 9, 9, 8, 12, 11},//sec2
            {10, 11, 9, 10, 9, 11, 15, 8, 10, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1},//sec3
            {11, 11, 12, 13, 12, 12, 10, 13, 10, 13, 13, 10, 9, 11, 10, 13, 12, 15, 14, 14},//sec4
            {14, 9, 15, 14, 15, 12, 14, 13, 15, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1},//sec5
            {8, 15, 15, 8, 15, 12, 10, 8, 9, 11, 15, 14, 14, 13, 11, 12, 13, 14, 13, 14},//sec6
            {15, 11, 14, 9, 13, 9, 8, 12, 13, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1},//sec7
            {10, 10, 11, 13, 10, 10, 11, 12, 12, 13, 15, 11, 14, 12, 11, 9, 8, 8, 9, 9}}//sec8
        };
    
    private int[][] compM = {{1, 5, 8, 4, 2, 3, 1, 9, 1, 9, 2, 3, 8, 4, 1, 5},
        {2, 8, 7, 6, 10, 6, 2, 5, 8, 2, 6, 7, 6, 10, 5, 2},
        {4, 7, 2, 1, 2, 9, 3, 1, 7, 4, 1, 2, 2, 1, 3, 9},
        {5, 3, 1, 5, 4, 9, 7, 6, 6, 4, 5, 7, 9, 5, 3, 1},
        {11, 17, 18, 8, 12, 15, 16, 10, 15, 16, 10, 12, 8, 17, 18, 11},
        {13, 9, 8, 20, 9, 11, 14, 13, 9, 20, 8, 13, 14, 9, 13, 11},
        {16, 17, 7, 20, 19, 14, 15, 3, 17, 16, 7, 15, 14, 19, 20, 3},
        {19, 18, 15, 14, 16, 17, 19, 18, 18, 19, 15, 14, 17, 16, 19, 18},
        {13, 14, 10, 2, 6, 8, 13, 9, 8, 13, 9, 10, 6, 14, 13, 2},
        {9, 20, 9, 17, 18, 10, 20, 19, 18, 17, 9, 20, 19, 10, 20, 9},
        {11, 5, 12, 16, 15, 8, 1, 3, 11, 5, 12, 15, 16, 8, 1, 3},
        {7, 12, 6, 4, 8, 6, 5, 7, 12, 7, 4, 6, 6, 8, 7, 5},
        {3, 8, 2, 3, 1, 4, 6, 4, 3, 3, 1, 2, 6, 4, 4, 5},
        {5, 4, 2, 6, 7, 5, 7, 11, 4, 6, 7, 2, 5, 11, 8, 7},
        {0, 4, 0, 1, 3, 0, 12, 0, 0, 4, 0, 1, 3, 0, 12, 0}};
    private int[][] sectM = {{2, 1, 8, 8, 8, 8, 6, 6, 6, 6, 8, 8, 8, 8, 2, 1},
        {5, 6, 8, 8, 8, 1, 2, 2, 6, 5, 8, 8, 1, 8, 2, 2},
        {7, 7, 7, 8, 1, 2, 1, 1, 7, 7, 8, 7, 1, 1, 1, 2},
        {7, 7, 7, 8, 1, 8, 1, 2, 2, 1, 8, 1, 8, 7, 7, 7},
        {6, 6, 6, 7, 8, 2, 2, 2, 2, 2, 2, 8, 7, 6, 6, 6},
        {8, 7, 1, 8, 1, 8, 2, 2, 1, 8, 1, 2, 2, 7, 8, 8},
        {8, 8, 6, 6, 6, 8, 8, 6, 8, 8, 6, 8, 8, 6, 6, 6},
        {8, 8, 4, 4, 4, 4, 4, 4, 8, 8, 4, 4, 4, 4, 4, 4},
        {6, 6, 6, 6, 6, 3, 4, 3, 3, 4, 3, 6, 6, 6, 6, 6},
        {5, 4, 4, 2, 2, 4, 2, 2, 2, 2, 4, 2, 2, 4, 4, 5},
        {2, 3, 4, 6, 6, 5, 5, 5, 2, 3, 4, 6, 6, 5, 5, 5},
        {2, 2, 3, 3, 4, 5, 5, 5, 2, 2, 3, 3, 5, 4, 5, 5},
        {2, 2, 3, 3, 3, 4, 4, 5, 2, 3, 3, 3, 4, 4, 5, 6},
        {6, 6, 4, 7, 4, 4, 3, 4, 6, 7, 4, 4, 4, 4, 2, 3},
        {0, 2, 0, 4, 4, 0, 6, 0, 0, 2, 0, 4, 4, 0, 6, 0}};
    private int emptyChannels[] = {0, 2, 5, 7, 8, 10, 13, 15};

    private int[][][] slotM={
    //layer1
    {{5,5,5,6,3,4,6,8,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1},//sec1
    {3,4,17,19,4,6,16,17,5,7,15,16,8,8,7,7,14,14,14,14},//sec2
    {17,17,17,16,15,16,18,13,13,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1},//sec3
    {19,18,19,17,18,17,18,16,14,14,18,15,13,10,10,10,10,10,10,14},//sec4
    {15,4,15,17,16,16,16,15,14,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1},//sec5
    {3,13,9,18,18,13,9,4,3,13,7,19,13,13,15,15,7,7,9,9},//sec6
    {6,5,6,5,6,18,5,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1},//sec7
    {5,3,3,3,6,4,4,3,6,4,8,7,8,9,9,9,9,10,10,8}//sec8
    },
    //layer2
    {{5,5,5,6,3,4,6,8,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1},//sec1
    {3,4,17,19,4,6,16,18,5,7,15,16,8,8,7,7,14,14,14,14},//sec2
    {17,17,17,16,15,16,18,13,13,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1},//sec3
    {19,18,19,17,18,17,18,16,14,14,18,15,13,10,10,10,10,10,10,14},//sec4
    {15,4,15,17,16,16,16,15,14,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1},//sec5
    {3,13,9,18,17,13,9,4,3,13,7,19,13,13,15,15,7,7,9,9},//sec6
    {6,5,6,5,6,18,5,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1},//sec7
    {5,3,3,3,6,4,4,3,6,4,8,7,8,9,9,9,9,10,10,8}//sec8
    }};
    
    public int getMezz4SLC(int isec, int ilay, int icomp) {
        // FT-Cal
        if (ilay == 0 || (ilay > 0 && (isec == 0 || icomp == 0))) {
            return -1;
        }
        //System.out.println("s,l,c = " + isec + ", " + ilay + ", " + icomp);
        int mezzanine = Mezz[ilay - 1][isec - 1][icomp - 1];
        // convention to agree with controller electronics [0,14]
        return (mezzanine - 1);
    }
    public int getChan4SLC(int isec, int ilay, int icomp) {
        // FT-Cal
        if (ilay == 0 || (ilay > 0 && (isec == 0 || icomp == 0))) {
            return -1;
        }
        int chan = chanM[ilay - 1][isec - 1][icomp - 1];
        return chan;
    }
    
    public int getSlot4SLC(int isec, int ilay, int icomp) {
        // FT-cal
        if (ilay == 0 || (ilay > 0 && (isec == 0 || icomp == 0))) {
            return -1;
        }
        int slot = slotM[ilay - 1][isec - 1][icomp - 1];
        return slot;
    }
    public int getComp4ChMez(int chan, int mezz) {
        if (chan > 15 || mezz > 14) {
            return -1;
        }
        int comp = compM[mezz][chan];
        return comp;
    }
    public int getSect4ChMez(int chan, int mezz) {
        if (chan > 15
                || mezz > 14) {
            return -1;
        }       
        int sect = sectM[mezz][chan];
        return sect;
    }
    public boolean isChannelEmpty(int channel) {
        boolean empty = false;
        for (int i = 0; i < emptyChannels.length; i++) {
            if (channel == emptyChannels[i]) {
                empty = true;
                break;
            }
        }
        return empty;
    }
    
}
